import{aB as a}from"./index-42de3ebb.js";const p=[{name:"admin",description:"拥有系统内所有菜单和路由权限"},{name:"editor",description:"可以看到除户管理页面之外的所有页面"}],u={admin:"admin-token",editor:"editor-token"},c={"admin-token":{id:"admin",roles:["admin"],name:"寒山骚年",avatar:a.Random.image("250x250","#1890ff","#fff","png","admin"),description:"拥有系统内所有菜单和路由权限"},"editor-token":{id:"editor",roles:["editor"],name:"编辑员",avatar:a.Random.image("250x250","#1890ff","#fff","png","editor"),description:"可以看到除户管理页面之外的所有页面"}},f=e=>{const{body:o}=e,{username:s}=o;return!s||!Object.keys(u).includes(s)?{code:1,message:"error.username.password.wrong"}:{code:0,message:"success",data:u[s]}},g=e=>{const{headers:o}=e,s=o.authorization||"";return!s||!Object.keys(c).includes(s)?{code:1,message:"error.getuserinfo"}:{code:0,message:"success",data:c[s]}},k=()=>({code:0,message:"success",data:Object.values(c)}),h=()=>({code:0,message:"success",data:p}),b=e=>{const{body:o}=e,{id:s,name:n,role:r,description:d}=o;if(Object.values(c).find(t=>t.id===s))return{code:1,message:"error"};{const t={id:s,role:r,name:n,avatar:a.Random.image("250x250","#1890ff","#fff","png",r),description:d},m=`${s}-token`;return u[s]=m,c[m]=t,{code:0,message:"success"}}},R=e=>{const{body:o}=e,{id:s,name:n,role:r,description:d}=o;if(Object.values(c).find(t=>t.id===s)){const t=`${s}-token`;return c[t]={...c[t],id:s,role:r,name:n,avatar:a.Random.image("250x250","#1890ff","#fff","png",r),description:d},{code:0,message:"success"}}else return{code:1,message:"error"}},y=e=>{const{body:o}=e,{id:s}=o;return delete c[`${s}-token`],delete u[s],{code:0,message:"success"}},U=e=>{const{body:o}=e,{name:s,description:n}=o;return p.map(i=>i.name).includes(s)?{code:1,message:"角色已存在"}:(p.push({name:s,description:n}),{code:0,message:"success"})},v=e=>{const{body:o}=e,{name:s,description:n}=o,r=p.findIndex(i=>i.name===s);return r===-1?{code:1,message:"角色不存在"}:(p[r].description=n,{code:0,message:"success"})},x=e=>{const{body:o}=e,{name:s}=o,n=p.findIndex(d=>d.name===s);return n===-1?{code:1,message:"角色不存在"}:(p.splice(n,1),{code:0,message:"success"})},O=[{url:"/api/login",timeout:1e3,method:"post",response:e=>f(e)},{url:"/api/userinfo",timeout:1e3,method:"get",response:e=>g(e)},{url:"/api/getuserList",timeout:1e3,method:"get",response:()=>k()},{url:"/api/getRoleList",timeout:1e3,method:"get",response:()=>h()},{url:"/api/addUser",timeout:1e3,method:"post",response:e=>b(e)},{url:"/api/editUser",timeout:1e3,method:"post",response:e=>R(e)},{url:"/api/deleteUser",timeout:1e3,method:"post",response:e=>y(e)},{url:"/api/addRole",timeout:1e3,method:"post",response:e=>U(e)},{url:"/api/editRole",timeout:1e3,method:"post",response:e=>v(e)},{url:"/api/deleteRole",timeout:1e3,method:"post",response:e=>x(e)}];export{O as default};
